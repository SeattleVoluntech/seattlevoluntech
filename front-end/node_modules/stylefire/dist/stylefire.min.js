!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.stylefire={})}(this,function(e){"use strict";var t=function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var r=function(){};"production"!==process.env.NODE_ENV&&(r=function(e,t){if(!e)throw new Error("Hey, listen! ".toUpperCase()+t)});var n,o=0,a="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(e){return window.requestAnimationFrame(e)}:function(e){var t=Date.now(),r=Math.max(0,16.7-(t-o));o=t+r,setTimeout(function(){return e(o)},r)};!function(e){e.Read="read",e.Update="update",e.Render="render",e.PostRender="postRender",e.FixedUpdate="fixedUpdate"}(n||(n={}));var i,s=1/60*1e3,u=!0,f=!1,c=!1,d={delta:0,timestamp:0},l=[n.Read,n.Update,n.Render,n.PostRender],p=function(e){return f=e},h=l.reduce(function(e,t){var n,o,a,i,s,u,c,d,l,h=(n=p,o=[],a=[],i=0,s=!1,u=0,c=new WeakSet,d=new WeakSet,l={cancel:function(e){var t=a.indexOf(e);c.add(e),-1!==t&&a.splice(t,1)},process:function(e){var t,r;if(s=!0,o=(t=[a,o])[0],(a=t[1]).length=0,i=o.length)for(u=0;u<i;u++)(r=o[u])(e),!0!==d.has(r)||c.has(r)||(l.schedule(r),n(!0));s=!1},schedule:function(e,t,n){r("function"==typeof e,"Argument must be a function");var u=n&&s,f=u?o:a;t&&d.add(e),-1===f.indexOf(e)&&(f.push(e),u&&(i=o.length))}});return e.sync[t]=function(e,t,r){return void 0===t&&(t=!1),void 0===r&&(r=!1),f||b(),h.schedule(e,t,r),e},e.cancelSync[t]=function(e){return h.cancel(e)},e.steps[t]=h,e},{steps:{},sync:{},cancelSync:{}}),g=h.steps,v=h.sync,m=(h.cancelSync,function(e){return g[e].process(d)}),y=function(e){f=!1,d.delta=u?s:Math.max(Math.min(e-d.timestamp,40),1),u||(s=d.delta),d.timestamp=e,c=!0,l.forEach(m),c=!1,f&&(u=!1,a(y))},b=function(){f=!0,u=!0,c||a(y)},w=function(e){var t=e.onRead,r=e.onRender,n=e.uncachedValues,o=void 0===n?new Set:n,a=e.useCache,i=void 0===a||a;return function(e){var n={},a=[],s=!1,u=function(e,t){var r=n[e];n[e]=t,n[e]!==r&&(-1===a.indexOf(e)&&a.push(e),s||(s=!0,v.render(f)))};function f(t){return void 0===t&&(t=!1),(!0===t||s)&&(r(n,e,a),s=!1,a.length=0),this}return{get:function(r){return r?i&&!o.has(r)&&void 0!==n[r]?n[r]:t(r,e):n},set:function(e,t){if("string"==typeof e){if(void 0===t)return function(t){return u(e,t)};u(e,t)}else for(var r in e)e.hasOwnProperty(r)&&u(r,e[r]);return this},render:f}}},O=/([a-z])([A-Z])/g,x=function(e){return e.replace(O,"$1-$2").toLowerCase()},R=new Map,L=new Map,S=["Webkit","Moz","O","ms",""],k=S.length,P="undefined"!=typeof document,T=function(e,t){return L.set(e,x(t))},Y=function(e,t){void 0===t&&(t=!1);var r=t?L:R;return r.has(e)||(P?function(e){i=i||document.createElement("div");for(var t=0;t<k;t++){var r=S[t],n=""===r,o=n?e:r+e.charAt(0).toUpperCase()+e.slice(1);(o in i.style||n)&&(R.set(e,o),T(e,(n?"":"-")+x(o)))}}(e):function(e){T(e,e)}(e)),r.get(e)||e},X=["","X","Y","Z"],C=["scale","rotate","skew","transformPerspective"].reduce(function(e,t){return X.reduce(function(e,r){return e.push(t+r),e},e)},["x","y","z"]),M=C.reduce(function(e,t){return e[t]=!0,e},{}),B=function(e){return!0===M[e]},W=function(e,t){return C.indexOf(e)-C.indexOf(t)},j=function(e){return"originX"===e||"originY"===e},A=function(){return(A=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},E=function(e,t){return function(r){return Math.max(Math.min(r,t),e)}},F=function(e){return function(t){return"string"==typeof t&&0===t.indexOf(e)}},Z=function(e){return e%1?Number(e.toFixed(5)):e},z={test:function(e){return"number"==typeof e},parse:parseFloat,transform:function(e){return e}},H=A({},z,{transform:E(0,1)}),N=A({},z,{default:1}),U=function(e){return{test:function(t){return"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return""+t+e}}},V=U("deg"),I=U("%"),q=U("px"),$=E(0,255),_=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))$/i,D=function(e){return void 0!==e.red},G=function(e){return void 0!==e.hue},J=function(e){var t=e.length;return function(r){if("string"!=typeof r)return r;for(var n,o={},a=function(e){return"string"==typeof e?e.split(/,\s*/):[e]}((n=r).substring(n.indexOf("(")+1,n.lastIndexOf(")"))),i=0;i<t;i++)o[e[i]]=void 0!==a[i]?parseFloat(a[i]):1;return o}},K=A({},z,{transform:function(e){return Math.round($(e))}}),Q=F("rgb"),ee={test:function(e){return"string"==typeof e?Q(e):D(e)},parse:J(["red","green","blue","alpha"]),transform:function(e){var t=e.red,r=e.green,n=e.blue,o=e.alpha;return function(e){var t=e.red,r=e.green,n=e.blue,o=e.alpha;return"rgba("+t+", "+r+", "+n+", "+(void 0===o?1:o)+")"}({red:K.transform(t),green:K.transform(r),blue:K.transform(n),alpha:Z(o)})}},te=F("hsl"),re={test:function(e){return"string"==typeof e?te(e):G(e)},parse:J(["hue","saturation","lightness","alpha"]),transform:function(e){var t=e.hue,r=e.saturation,n=e.lightness,o=e.alpha;return function(e){var t=e.hue,r=e.saturation,n=e.lightness,o=e.alpha;return"hsla("+t+", "+r+", "+n+", "+(void 0===o?1:o)+")"}({hue:Math.round(t),saturation:I.transform(Z(r)),lightness:I.transform(Z(n)),alpha:Z(o)})}},ne=A({},ee,{test:F("#"),parse:function(e){var t="",r="",n="";return e.length>4?(t=e.substr(1,2),r=e.substr(3,2),n=e.substr(5,2)):(t=e.substr(1,1),r=e.substr(2,1),n=e.substr(3,1),t+=t,r+=r,n+=n),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:1}}}),oe={test:function(e){return"string"==typeof e&&_.test(e)||ee.test(e)||re.test(e)||ne.test(e)},parse:function(e){return ee.test(e)?ee.parse(e):re.test(e)?re.parse(e):ne.test(e)?ne.parse(e):e},transform:function(e){return D(e)?ee.transform(e):G(e)?re.transform(e):e}},ae={color:oe,backgroundColor:oe,outlineColor:oe,fill:oe,stroke:oe,borderColor:oe,borderTopColor:oe,borderRightColor:oe,borderBottomColor:oe,borderLeftColor:oe,borderWidth:q,borderTopWidth:q,borderRightWidth:q,borderBottomWidth:q,borderLeftWidth:q,borderRadius:q,borderTopLeftRadius:q,borderTopRightRadius:q,borderBottomRightRadius:q,borderBottomLeftRadius:q,width:q,maxWidth:q,height:q,maxHeight:q,top:q,right:q,bottom:q,left:q,padding:q,paddingTop:q,paddingRight:q,paddingBottom:q,paddingLeft:q,margin:q,marginTop:q,marginRight:q,marginBottom:q,marginLeft:q,rotate:V,rotateX:V,rotateY:V,rotateZ:V,scale:N,scaleX:N,scaleY:N,scaleZ:N,skew:V,skewX:V,skewY:V,distance:q,x:q,y:q,z:q,perspective:q,opacity:H,originX:I,originY:I,originZ:q},ie=function(e){return ae[e]},se=new Set(["scrollLeft","scrollTop"]),ue=new Set(["scrollLeft","scrollTop","transform"]),fe={x:"translateX",y:"translateY",z:"translateZ"},ce=function(e){return"function"==typeof e},de=function(e,t,r,n,o,a){void 0===t&&(t=!0),void 0===r&&(r={}),void 0===n&&(n={}),void 0===o&&(o={}),void 0===a&&(a=[]);var i=!0,s=!1,u=!1;for(var f in e){var c=e[f],d=ie(f),l="number"==typeof c&&d?d.transform(c):c;B(f)?(s=!0,n[f]=l,a.push(f),i&&(d.default&&c!==d.default||!d.default&&0!==c)&&(i=!1)):j(f)?(o[f]=l,u=!0):ue.has(f)&&ce(l)||(r[Y(f,!0)]=l)}if(i)s&&(r.transform="none");else{var p="";if(ce(e.transform))p=e.transform(n);else{var h=!1;a.sort(W);for(var g=a.length,v=0;v<g;v++){f=a[v];p+=(fe[f]||f)+"("+n[f]+") ",h="z"===f||h}!h&&t?p+="translateZ(0)":p=p.trim()}r.transform=p}return u&&(r.transformOrigin=(o.originX||0)+" "+(o.originY||0)+" "+(o.originZ||0)),r},le=w({onRead:function(e,t){var r=t.element,n=t.preparseOutput,o=ie(e);if(B(e))return o&&o.default||0;if(se.has(e))return r[e];var a=window.getComputedStyle(r,null).getPropertyValue(Y(e,!0))||0;return n&&o&&o.parse?o.parse(a):a},onRender:function(e,t,r){var n=t.element,o=t.buildStyles;Object.assign(n.style,o(e)),-1!==r.indexOf("scrollLeft")&&(n.scrollLeft=e.scrollLeft),-1!==r.indexOf("scrollTop")&&(n.scrollTop=e.scrollTop)},uncachedValues:se}),pe=function(e,r){void 0===r&&(r={});var n=r.enableHardwareAcceleration,o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r}(r,["enableHardwareAcceleration"]);return le(t({element:e,buildStyles:function(e){void 0===e&&(e=!0);var t={},r={},n={},o=[];return function(a){return o.length=0,de(a,e,t,r,n,o),t}}(n),preparseOutput:!0},o))},he=function(e,t){return e/100*t+"px"},ge={fill:oe,stroke:oe,scale:N,scaleX:N,scaleY:N,opacity:H,fillOpacity:H,strokeOpacity:H},ve=w({onRead:function(e,t){var r=t.element;if(B(e)){var n=function(e){return ge[e]}(e);return n?n.default:0}return r.getAttribute(e)},onRender:function(e,t){var r=t.dimensions;!function(e,t){for(var r in t)t.hasOwnProperty(r)&&e.setAttribute(r,t[r])}(t.element,function(e,t,r,n){var o=!1,a=!1,i={},s=r?{pathLength:"0",pathSpacing:""+n}:void 0,u=void 0!==e.scale?e.scale||1e-7:e.scaleX||1,f=void 0!==e.scaleY?e.scaleY||1e-7:u||1,c=t.width*((e.originX||50)/100)+t.x,d=t.height*((e.originY||50)/100)+t.y,l=1*u*-c,p=1*f*-d,h=c/u,g=d/f,v={translate:"translate("+e.x+", "+e.y+") ",scale:"translate("+l+", "+p+") scale("+u+", "+f+") translate("+h+", "+g+") ",rotate:"rotate("+e.rotate+", "+c+", "+d+") ",skewX:"skewX("+e.skewX+") ",skewY:"skewY("+e.skewY+") "};for(var m in e)if(e.hasOwnProperty(m)){var y=e[m];B(m)?o=!0:!r||"pathLength"!==m&&"pathSpacing"!==m||"number"!=typeof y?r&&"pathOffset"===m?i["stroke-dashoffset"]=he(-y,n):i[x(m)]=y:(a=!0,s[m]=he(y,n))}if(a&&(i["stroke-dasharray"]=s.pathLength+" "+s.pathSpacing),o)for(var m in i.transform="",v)if(v.hasOwnProperty(m)){var b="scale"===m?"1":"0";i.transform+=v[m].replace(/undefined/g,b)}return i}(e,r,t.isPath,t.pathLength))}}),me=w({useCache:!1,onRead:function(e){return"scrollTop"===e?window.pageYOffset:window.pageXOffset},onRender:function(e){var t=e.scrollTop,r=void 0===t?0:t,n=e.scrollLeft,o=void 0===n?0:n;return window.scrollTo(o,r)}}),ye=new WeakMap,be=function(e,t){var n;return e instanceof HTMLElement?n=pe(e,t):e instanceof SVGElement?n=function(e){var t="function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect(),r={element:e,dimensions:{x:t.x,y:t.y,width:t.width,height:t.height},isPath:!1};return"path"===e.tagName&&(r.isPath=!0,r.pathLength=e.getTotalLength()),ve(r)}(e):e===window&&(n=me(e)),r(void 0!==n,"No valid node provided. Node must be HTMLElement, SVGElement or window."),ye.set(e,n),n},we=function(e,t){return ye.has(e)?ye.get(e):be(e,t)};e.default=function(e,t){var r="string"==typeof e?document.querySelector(e):e;return we(r,t)},e.createStylerFactory=w,e.buildStyleProperty=de,Object.defineProperty(e,"__esModule",{value:!0})});
